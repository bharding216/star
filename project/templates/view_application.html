{% extends "base.html" %}

{% block title %}View Application Details | STAR{% endblock %}


{% block content %}

<div class="container my-5">
    {% with messages = get_flashed_messages(with_categories=True) %}
    {% if messages %}
            {% for category, message in messages %}
                {% if category == 'success' %}
                    <div class="alert alert-success mx-5" role="alert">
                        {{ message }}
                    </div>
                {% else %}
                    <div class="alert alert-danger mx-5" role="alert">
                        {{ message }}
                    </div>
                {% endif %}
            {% endfor %}
    {% endif %}
    {% endwith %}
</div>

<div class="container my-5">
    <h4>Application Documents For:</h4>
    <ul>
        <li><u>Company Name</u>: {{ applications_for_bid_and_supplier[0].supplier.company_name }}</li>
        <li><u>Bid Title</u>: {{bid_object.title}}</li>
    </ul>
</div>

<div class="container my-5">
    <div style="overflow-x: auto;">
        <table>
            <thead>
                <tr>
                    <th class="text-center align-middle" scope="col" 
                        style="width: 300px; padding: 0px 20px;">
                        Document Title
                    </th>

                    <th class="text-center align-middle" scope="col" 
                        style="width: 200px; padding: 0px 20px;">
                        Download
                    </th>
                </tr>
            </thead>
    
            <tbody>
                {% for doc in applications_for_bid_and_supplier %}
                    <tr>
                        <td class="text-center align-middle" style="padding-left: 10px;">{{ doc.filename }}</td>

                        <td class="text-center align-middle" style="padding: 0px 20px;">
                            <form action="{{ url_for('views.download_application_doc') }}" method="POST">
                                <input type="hidden" name="filename" value="{{ doc.filename }}">
                                <input type="hidden" name="date_time_stamp" value="{{ doc.date_time_stamp }}">
                                <button type="submit" 
                                    class="btn btn-primary"
                                    style="width:auto">
                                    Download
                                </button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
  


{% endblock %}